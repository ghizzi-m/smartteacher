<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ - Ù…Ù†ØµØ© Ø£Ø¯ÙˆØ§Øª ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†" />
    <title>Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ - Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙØµÙ„</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Babel for in-browser JSX compilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body {
        font-family: 'Tajawal', sans-serif;
        background-color: #f3f4f6;
      }
      ::-webkit-scrollbar { width: 8px; height: 8px; }
      ::-webkit-scrollbar-track { background: #f1f1f1; }
      ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
      ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      
      /* Animation Utilities */
      @keyframes spin-slow {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    </style>

    <!-- Import Map for React and Libraries -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.292.0",
        "@google/genai": "https://esm.sh/@google/genai" 
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            LayoutDashboard, Timer, Calculator, BrainCircuit, Disc, ArrowRightLeft,
            Play, Pause, RotateCcw, Delete, Equal, FlaskConical, 
            Sparkles, BookOpen, Loader2, Menu, X, GraduationCap, ChevronLeft,
            Users, RefreshCw, Save, RotateCw, Ruler, Weight, Thermometer, Clock, ArrowDown
        } from 'lucide-react';
        import { GoogleGenAI } from '@google/genai';

        // --- TYPES & ENUMS ---
        const AppView = {
            DASHBOARD: 'DASHBOARD',
            TIMER: 'TIMER',
            CALCULATOR: 'CALCULATOR',
            NAME_WHEEL: 'NAME_WHEEL',
            TRANSFERS: 'TRANSFERS',
            AI_ASSISTANT: 'AI_ASSISTANT'
        };

        // --- CONSTANTS ---
        const NAV_ITEMS = [
            {
                id: AppView.DASHBOARD,
                label: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                icon: <LayoutDashboard className="w-5 h-5" />,
                description: 'Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯ÙˆØ§Øª'
            },
            {
                id: AppView.TIMER,
                label: 'Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª',
                icon: <Timer className="w-5 h-5" />,
                description: 'Ù…Ø¤Ù‚ØªØ§Øª Ø±Ù…Ù„ÙŠØ©ØŒ Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©'
            },
            {
                id: AppView.CALCULATOR,
                label: 'Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø©',
                icon: <Calculator className="w-5 h-5" />,
                description: 'Ø­Ø§Ø³Ø¨Ø© ÙƒØ¨ÙŠØ±Ø© ÙˆÙˆØ§Ø¶Ø­Ø©'
            },
            {
                id: AppView.NAME_WHEEL,
                label: 'Ø¹Ø¬Ù„Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡',
                icon: <Disc className="w-5 h-5" />,
                description: 'Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ø·Ù„Ø§Ø¨'
            },
            {
                id: AppView.TRANSFERS,
                label: 'Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª',
                icon: <ArrowRightLeft className="w-5 h-5" />,
                description: 'ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³'
            },
            {
                id: AppView.AI_ASSISTANT,
                label: 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ',
                icon: <BrainCircuit className="w-5 h-5" />,
                description: 'ØªÙˆÙ„ÙŠØ¯ Ø£ÙÙƒØ§Ø± ÙˆØ£Ù†Ø´Ø·Ø© ØµÙÙŠØ©'
            }
        ];

        // --- COMPONENTS ---

        // 1. Timer Tool
        const TimerTool = () => {
            const [activeTab, setActiveTab] = useState('classic');
            const [timeLeft, setTimeLeft] = useState(60);
            const [initialTime, setInitialTime] = useState(60);
            const [isRunning, setIsRunning] = useState(false);
            const [customMin, setCustomMin] = useState('');
            const [customSec, setCustomSec] = useState('');
            
            const audioRef = useRef(null);

            useEffect(() => {
                audioRef.current = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');
            }, []);

            const playSound = () => {
                if (audioRef.current) {
                    audioRef.current.play().catch(e => console.log("Audio play blocked", e));
                }
            };

            const handleStart = () => setIsRunning(true);
            const handlePause = () => setIsRunning(false);
            
            const handleReset = useCallback(() => {
                setIsRunning(false);
                setTimeLeft(initialTime);
            }, [initialTime]);

            const handleSetTime = (seconds) => {
                setIsRunning(false);
                setInitialTime(seconds);
                setTimeLeft(seconds);
            };

            const handleCustomSubmit = (e) => {
                e.preventDefault();
                const min = parseInt(customMin) || 0;
                const sec = parseInt(customSec) || 0;
                const totalSeconds = (min * 60) + sec;
                
                if (totalSeconds > 0) {
                handleSetTime(totalSeconds);
                setCustomMin('');
                setCustomSec('');
                }
            };

            useEffect(() => {
                let interval;
                if (isRunning && timeLeft > 0) {
                    interval = setInterval(() => {
                        setTimeLeft((prev) => prev - 1);
                    }, 1000);
                } else if (timeLeft === 0 && isRunning) {
                    setIsRunning(false);
                    playSound();
                }
                return () => clearInterval(interval);
            }, [isRunning, timeLeft]);

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            };

            const progressPercentage = Math.max(0, (timeLeft / initialTime) * 100);
            const inversePercentage = 100 - progressPercentage;

            const QUICK_TIMES = [
                { label: '5 Ø«ÙˆØ§Ù†ÙŠ', value: 5 },
                { label: '10 Ø«ÙˆØ§Ù†ÙŠ', value: 10 },
                { label: '15 Ø«Ø§Ù†ÙŠØ©', value: 15 },
                { label: '20 Ø«Ø§Ù†ÙŠØ©', value: 20 },
                { label: '30 Ø«Ø§Ù†ÙŠØ©', value: 30 },
                { label: 'Ø¯Ù‚ÙŠÙ‚Ø©', value: 60 },
                { label: 'Ø¯Ù‚ÙŠÙ‚ØªØ§Ù†', value: 120 },
                { label: '3 Ø¯Ù‚Ø§Ø¦Ù‚', value: 180 },
                { label: '5 Ø¯Ù‚Ø§Ø¦Ù‚', value: 300 },
                { label: '10 Ø¯Ù‚Ø§Ø¦Ù‚', value: 600 },
            ];

            return (
                <div className="max-w-4xl mx-auto p-8 bg-white rounded-3xl shadow-xl border border-gray-100">
                    <div className="flex justify-center gap-3 mb-10 p-2 bg-gray-50 rounded-2xl w-fit mx-auto">
                        {[{ id: 'classic', label: 'ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ' }, { id: 'sports', label: 'Ø±ÙŠØ§Ø¶ÙŠ' }, { id: 'sand', label: 'Ø±Ù…Ù„ÙŠ' }].map((type) => (
                        <button
                            key={type.id}
                            onClick={() => setActiveTab(type.id)}
                            className={`px-8 py-3 rounded-xl font-bold transition-all duration-300 ${
                            activeTab === type.id
                                ? 'bg-white text-blue-600 shadow-md transform scale-105'
                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100'
                            }`}
                        >
                            {type.label}
                        </button>
                        ))}
                    </div>

                    <div className="flex flex-col items-center justify-center min-h-[400px] mb-10 relative bg-gray-50/50 rounded-3xl border border-gray-100 p-8">
                        {activeTab === 'classic' && (
                        <div className="flex flex-col items-center">
                            <div className="text-[140px] font-mono font-bold text-gray-800 tabular-nums leading-none tracking-tighter drop-shadow-sm">
                            {formatTime(timeLeft)}
                            </div>
                            <div className="text-gray-400 font-medium mt-4">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</div>
                        </div>
                        )}

                        {activeTab === 'sports' && (
                        <div className="relative w-80 h-80 flex items-center justify-center">
                            <svg className="w-full h-full transform -rotate-90" viewBox="0 0 360 360">
                            <circle cx="180" cy="180" r="150" stroke="currentColor" strokeWidth="25" fill="transparent" className="text-gray-200" />
                            <circle cx="180" cy="180" r="150" stroke="currentColor" strokeWidth="25" fill="transparent" strokeDasharray={2 * Math.PI * 150} strokeDashoffset={2 * Math.PI * 150 * (1 - progressPercentage / 100)} className={`${progressPercentage < 20 ? 'text-red-500' : 'text-blue-500'} transition-all duration-1000 ease-linear`} strokeLinecap="round" />
                            </svg>
                            <div className="absolute flex flex-col items-center">
                            <span className="text-6xl font-mono font-bold text-gray-700 tabular-nums">{formatTime(timeLeft)}</span>
                            </div>
                        </div>
                        )}

                        {activeTab === 'sand' && (
                        <div className="relative w-full h-[380px] flex items-center justify-center">
                            <div className="absolute right-10 top-10 w-32 text-center hidden lg:block bg-white/80 p-2 rounded-xl backdrop-blur-sm shadow-sm">
                                <span className="text-3xl font-bold text-amber-800 font-mono block">{formatTime(timeLeft)}</span>
                            </div>
                            <svg viewBox="0 0 200 300" className="h-full drop-shadow-2xl">
                                <defs>
                                    <radialGradient id="glassGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                                        <stop offset="0%" stopColor="rgba(255,255,255,0.1)" />
                                        <stop offset="80%" stopColor="rgba(255,255,255,0.3)" />
                                        <stop offset="100%" stopColor="rgba(200,220,255,0.4)" />
                                    </radialGradient>
                                    <linearGradient id="sandGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stopColor="#d97706" />
                                        <stop offset="50%" stopColor="#f59e0b" />
                                        <stop offset="100%" stopColor="#d97706" />
                                    </linearGradient>
                                    <clipPath id="topBulbClip"><path d="M10,10 Q100,20 190,10 L160,140 Q100,160 40,140 Z" /></clipPath>
                                    <clipPath id="bottomBulbClip"><path d="M40,160 Q100,140 160,160 L190,290 Q100,280 10,290 Z" /></clipPath>
                                </defs>
                                <rect x="0" y="0" width="200" height="20" rx="4" fill="#5D4037" stroke="#3E2723" strokeWidth="2"/>
                                <rect x="0" y="280" width="200" height="20" rx="4" fill="#5D4037" stroke="#3E2723" strokeWidth="2"/>
                                <rect x="10" y="20" width="10" height="260" fill="#8D6E63" />
                                <rect x="180" y="20" width="10" height="260" fill="#8D6E63" />
                                <g clipPath="url(#topBulbClip)">
                                    <rect x="0" y="0" width="200" height="150" fill="url(#sandGradient)" className="transition-all duration-1000 ease-linear" style={{ transform: `translateY(${inversePercentage}%)`, transformOrigin: 'bottom' }} />
                                </g>
                                {isRunning && timeLeft > 0 && (<line x1="100" y1="140" x2="100" y2="290" stroke="url(#sandGradient)" strokeWidth="3" />)}
                                <g clipPath="url(#bottomBulbClip)">
                                    <rect x="0" y="150" width="200" height="150" fill="url(#sandGradient)" className="transition-all duration-1000 ease-linear" style={{ transform: `translateY(${100 - inversePercentage}%)` }} />
                                </g>
                                <path d="M25,20 Q100,30 175,20 L155,140 Q100,155 100,150 Q100,155 45,140 L25,20 Z M45,160 Q100,145 155,160 L175,280 Q100,270 25,280 L45,160 Z" fill="url(#glassGradient)" stroke="rgba(255,255,255,0.6)" strokeWidth="1" />
                            </svg>
                        </div>
                        )}
                    </div>

                    <div className="flex justify-center gap-6 mb-10">
                        {!isRunning ? (
                        <button onClick={handleStart} disabled={timeLeft === 0} className="flex items-center gap-3 px-10 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold text-xl shadow-lg shadow-indigo-200 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"><Play className="w-7 h-7" fill="currentColor" /> Ø§Ø¨Ø¯Ø£</button>
                        ) : (
                        <button onClick={handlePause} className="flex items-center gap-3 px-10 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-2xl font-bold text-xl shadow-lg shadow-amber-200 transition-all active:scale-95"><Pause className="w-7 h-7" fill="currentColor" /> Ø¥ÙŠÙ‚Ø§Ù</button>
                        )}
                        <button onClick={handleReset} className="flex items-center gap-3 px-8 py-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-2xl font-bold text-xl shadow-sm transition-all active:scale-95"><RotateCcw className="w-7 h-7" /> Ø¥Ø¹Ø§Ø¯Ø©</button>
                    </div>

                    <div className="pt-8 border-t border-gray-100">
                         <h3 className="text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider text-right">ØªÙˆÙ‚ÙŠØª Ø³Ø±ÙŠØ¹</h3>
                        <div className="flex flex-wrap gap-2 mb-6 justify-center md:justify-start">
                        {QUICK_TIMES.map((preset) => (
                            <button key={preset.value} onClick={() => handleSetTime(preset.value)} className="px-4 py-3 bg-gray-50 text-gray-700 rounded-xl hover:bg-indigo-50 hover:text-indigo-700 hover:border-indigo-200 font-bold transition-all border border-gray-200 flex-grow md:flex-grow-0">{preset.label}</button>
                        ))}
                        </div>
                        <div className="bg-gray-50 p-6 rounded-2xl border border-gray-200">
                            <h3 className="text-sm font-bold text-gray-400 mb-2 text-right">ØªØ¹ÙŠÙŠÙ† ÙŠØ¯ÙˆÙŠ</h3>
                            <form onSubmit={handleCustomSubmit} className="flex gap-4 items-end">
                                <div className="flex-1"><label className="block text-xs text-gray-500 mb-1 font-bold mr-1">Ø¯Ù‚Ø§Ø¦Ù‚</label><input type="number" placeholder="00" value={customMin} onChange={(e) => setCustomMin(e.target.value)} className="w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:outline-none focus:border-indigo-500 text-center text-xl font-mono" min="0" /></div>
                                <div className="text-2xl font-bold text-gray-400 mb-3">:</div>
                                <div className="flex-1"><label className="block text-xs text-gray-500 mb-1 font-bold mr-1">Ø«ÙˆØ§Ù†ÙŠ</label><input type="number" placeholder="00" value={customSec} onChange={(e) => setCustomSec(e.target.value)} className="w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:outline-none focus:border-indigo-500 text-center text-xl font-mono" min="0" /></div>
                                <button type="submit" className="px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 font-bold shadow-md text-lg h-[54px]">ØªØ¹ÙŠÙŠÙ†</button>
                            </form>
                        </div>
                    </div>
                </div>
            );
        };

        // 2. Calculator Tool
        const CalculatorTool = () => {
            const [display, setDisplay] = useState('0');
            const [isScientific, setIsScientific] = useState(false);
            const [expression, setExpression] = useState('');
            const [newNumber, setNewNumber] = useState(true);

            const handleNum = (num) => {
                if (display === '0' || newNumber) {
                setDisplay(num);
                setNewNumber(false);
                } else {
                setDisplay(display + num);
                }
            };

            const handleOp = (op) => {
                setExpression(display + ' ' + op);
                setNewNumber(true);
            };

            const handleSciOp = (func) => {
                if (display === '0' || newNumber) {
                setDisplay(func + '(');
                setNewNumber(false);
                } else {
                setDisplay(display + func + '(');
                }
            };

            const clear = () => {
                setDisplay('0');
                setExpression('');
                setNewNumber(true);
            };

            const backspace = () => {
                if (newNumber) return;
                if (display.length === 1) {
                setDisplay('0');
                setNewNumber(true);
                } else {
                setDisplay(display.slice(0, -1));
                }
            };

            const calculate = () => {
                try {
                    let fullExpr = expression ? expression + ' ' + display : display;
                    let evalString = fullExpr
                        .replace(/Ã—/g, '*')
                        .replace(/Ã·/g, '/')
                        .replace(/Ï€/g, 'Math.PI')
                        .replace(/e/g, 'Math.E')
                        .replace(/\^/g, '**')
                        .replace(/âˆš\(/g, 'Math.sqrt(')
                        .replace(/sin\(/g, 'Math.sin(')
                        .replace(/cos\(/g, 'Math.cos(')
                        .replace(/tan\(/g, 'Math.tan(')
                        .replace(/log\(/g, 'Math.log10(')
                        .replace(/ln\(/g, 'Math.log(');
                    
                    const result = eval(evalString);
                    if (!isFinite(result) || isNaN(result)) {
                        setDisplay('Ø®Ø·Ø£');
                    } else {
                        const formatted = Math.round(result * 1000000000) / 1000000000;
                        setDisplay(String(formatted));
                        setExpression('');
                    }
                    setNewNumber(true);
                } catch (e) {
                    setDisplay('Ø®Ø·Ø£');
                    setNewNumber(true);
                }
            };

            const btnClass = "h-20 md:h-24 rounded-2xl text-3xl md:text-4xl font-medium transition-all duration-200 flex items-center justify-center active:scale-95 shadow-sm hover:shadow-md select-none";
            const numClass = `${btnClass} bg-white text-gray-800 hover:bg-gray-50 border border-gray-100`;
            const opClass = `${btnClass} bg-indigo-50 text-indigo-600 hover:bg-indigo-100 border border-indigo-100`;
            const sciClass = `${btnClass} bg-teal-50 text-teal-700 hover:bg-teal-100 border border-teal-100 text-2xl font-bold`;
            const actionClass = `${btnClass} bg-gray-100 text-gray-600 hover:bg-gray-200 border border-gray-200`;
            const equalClass = `${btnClass} bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200`;

            return (
                <div className="flex flex-col items-center justify-center min-h-[600px] p-4">
                <div className={`transition-all duration-500 ease-in-out w-full ${isScientific ? 'max-w-5xl' : 'max-w-2xl'} bg-gray-50 p-6 md:p-8 rounded-[40px] shadow-2xl border border-white`}>
                    <div className="flex justify-between items-center mb-6 px-2">
                        <div className="flex items-center gap-3 text-gray-600">
                            <Calculator className="w-8 h-8" />
                            <span className="text-xl font-extrabold uppercase tracking-wider">{isScientific ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„Ù…ÙŠ' : 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø³ÙŠØ·'}</span>
                        </div>
                        <button onClick={() => setIsScientific(!isScientific)} className={`flex items-center gap-2 px-6 py-3 rounded-full text-lg font-extrabold transition-colors ${isScientific ? 'bg-teal-100 text-teal-800' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}>
                            <FlaskConical className="w-6 h-6" />
                            {isScientific ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù„Ù…ÙŠ' : 'Ø¹Ù„Ù…ÙŠ'}
                        </button>
                    </div>
                    <div className="bg-white rounded-[30px] p-8 mb-8 shadow-[inset_0_2px_10px_rgba(0,0,0,0.02)] border border-gray-100 h-40 flex flex-col justify-between items-end overflow-hidden">
                        <div className="text-gray-400 text-lg font-medium h-8 w-full text-right truncate">{expression}</div>
                        <div className="text-6xl md:text-7xl font-bold text-gray-800 tracking-tight w-full text-right truncate">{display}</div>
                    </div>
                    <div className="flex gap-4">
                        {isScientific && (
                            <div className="grid grid-cols-2 gap-3 md:gap-4 w-1/3 animate-in fade-in slide-in-from-right duration-300">
                                <button onClick={() => handleSciOp('sin')} className={sciClass}>sin</button>
                                <button onClick={() => handleSciOp('cos')} className={sciClass}>cos</button>
                                <button onClick={() => handleSciOp('tan')} className={sciClass}>tan</button>
                                <button onClick={() => handleSciOp('log')} className={sciClass}>log</button>
                                <button onClick={() => handleSciOp('ln')} className={sciClass}>ln</button>
                                <button onClick={() => handleOp('^')} className={sciClass}>^</button>
                                <button onClick={() => handleSciOp('âˆš')} className={sciClass}>âˆš</button>
                                <button onClick={() => handleNum('(')} className={sciClass}>(</button>
                                <button onClick={() => handleNum(')')} className={sciClass}>)</button>
                                <button onClick={() => handleNum('Ï€')} className={sciClass}>Ï€</button>
                            </div>
                        )}
                        <div className={`grid grid-cols-4 gap-3 md:gap-4 ${isScientific ? 'w-2/3' : 'w-full'}`}>
                            <button onClick={clear} className={`${actionClass} text-red-500 font-bold`}>C</button>
                            <button onClick={() => handleOp('%')} className={actionClass}>%</button>
                            <button onClick={backspace} className={actionClass}><Delete className="w-8 h-8" /></button>
                            <button onClick={() => handleOp('Ã·')} className={opClass}>Ã·</button>
                            <button onClick={() => handleNum('7')} className={numClass}>7</button>
                            <button onClick={() => handleNum('8')} className={numClass}>8</button>
                            <button onClick={() => handleNum('9')} className={numClass}>9</button>
                            <button onClick={() => handleOp('Ã—')} className={opClass}>Ã—</button>
                            <button onClick={() => handleNum('4')} className={numClass}>4</button>
                            <button onClick={() => handleNum('5')} className={numClass}>5</button>
                            <button onClick={() => handleNum('6')} className={numClass}>6</button>
                            <button onClick={() => handleOp('-')} className={opClass}>-</button>
                            <button onClick={() => handleNum('1')} className={numClass}>1</button>
                            <button onClick={() => handleNum('2')} className={numClass}>2</button>
                            <button onClick={() => handleNum('3')} className={numClass}>3</button>
                            <button onClick={() => handleOp('+')} className={opClass}>+</button>
                            <button onClick={() => handleNum('0')} className={`${numClass} col-span-2`}>0</button>
                            <button onClick={() => handleNum('.')} className={numClass}>.</button>
                            <button onClick={calculate} className={equalClass}><Equal className="w-8 h-8" strokeWidth={3} /></button>
                        </div>
                    </div>
                </div>
                </div>
            );
        };

        // 3. Name Wheel Tool
        const NameWheelTool = () => {
            const [textInput, setTextInput] = useState('');
            const [names, setNames] = useState([]);
            const [rotation, setRotation] = useState(0);
            const [isSpinning, setIsSpinning] = useState(false);
            const [winner, setWinner] = useState(null);
            
            const audioRef = useRef(null);
            const COLORS = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#F1948A', '#82E0AA', '#85C1E9', '#F0B27A', '#D7BDE2'];

            useEffect(() => {
                const savedNames = localStorage.getItem('smartTeacher_wheelNames');
                if (savedNames) {
                    setTextInput(savedNames);
                    setNames(savedNames.split('\n').filter(n => n.trim() !== ''));
                }
                audioRef.current = new Audio('https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3');
            }, []);

            const handleTextChange = (e) => {
                const newValue = e.target.value;
                setTextInput(newValue);
                const newNames = newValue.split('\n').filter(n => n.trim() !== '');
                setNames(newNames);
                if (winner && !newNames.includes(winner)) setWinner(null);
                localStorage.setItem('smartTeacher_wheelNames', newValue);
            };

            const handleClear = () => {
                setTextInput('');
                setNames([]);
                setWinner(null);
                localStorage.removeItem('smartTeacher_wheelNames');
            };

            const handleSpin = () => {
                if (names.length < 2 || isSpinning) return;
                setIsSpinning(true);
                setWinner(null);
                
                const randomSpins = Math.floor(Math.random() * (10 - 5 + 1)) + 5;
                const randomDegree = Math.floor(Math.random() * 360);
                const totalDegrees = randomSpins * 360 + randomDegree;
                const newRotation = rotation + totalDegrees;
                setRotation(newRotation);

                setTimeout(() => {
                    setIsSpinning(false);
                    calculateWinner(newRotation);
                    if (audioRef.current) {
                        audioRef.current.currentTime = 0;
                        audioRef.current.play().catch(console.error);
                    }
                }, 5000);
            };

            const calculateWinner = (finalRotation) => {
                const segmentAngle = 360 / names.length;
                const normalizedRotation = finalRotation % 360;
                const pointerAngle = (360 - normalizedRotation) % 360;
                const winningIndex = Math.floor(pointerAngle / segmentAngle);
                if (names[winningIndex]) setWinner(names[winningIndex]);
            };

            const WheelSVG = useMemo(() => {
                if (names.length === 0) {
                    return (
                        <div className="w-full h-full rounded-full bg-gray-50 border-4 border-dashed border-gray-300 flex flex-col items-center justify-center text-gray-400 font-bold p-8 text-center">
                            <Users className="w-16 h-16 mb-4 opacity-50" />
                            <span className="text-2xl">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¬Ù„Ø©</span>
                        </div>
                    );
                }
                const radius = 180;
                const center = 200;
                const total = names.length;
                const anglePerSlice = 360 / total;

                const getCoordinatesForPercent = (percent) => {
                    const x = center + radius * Math.cos(2 * Math.PI * percent);
                    const y = center + radius * Math.sin(2 * Math.PI * percent);
                    return [x, y];
                };

                return (
                    <svg viewBox="0 0 400 400" className="w-full h-full transform -rotate-90">
                        {names.map((name, i) => {
                            const startAngle = i * anglePerSlice;
                            const endAngle = (i + 1) * anglePerSlice;
                            const startPercent = startAngle / 360;
                            const endPercent = endAngle / 360;
                            const [startX, startY] = getCoordinatesForPercent(startPercent);
                            const [endX, endY] = getCoordinatesForPercent(endPercent);
                            const largeArcFlag = endPercent - startPercent > 0.5 ? 1 : 0;
                            const pathData = [`M ${center} ${center}`, `L ${startX} ${startY}`, `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${endX} ${endY}`, 'Z'].join(' ');
                            
                            const textAngle = startAngle + anglePerSlice / 2;
                            const textRad = (textAngle * Math.PI) / 180;
                            const textX = center + (radius * 0.72) * Math.cos(textRad);
                            const textY = center + (radius * 0.72) * Math.sin(textRad);

                            return (
                                <g key={i}>
                                    <path d={pathData} fill={COLORS[i % COLORS.length]} stroke="white" strokeWidth="2" />
                                    <text x={textX} y={textY} fill="white" fontSize={total > 24 ? "12" : total > 12 ? "18" : "24"} fontWeight="800" textAnchor="middle" alignmentBaseline="middle" transform={`rotate(${textAngle}, ${textX}, ${textY})`} className="drop-shadow-sm pointer-events-none select-none font-sans">
                                        {name.length > 20 ? name.substring(0, 18) + '..' : name}
                                    </text>
                                </g>
                            );
                        })}
                    </svg>
                );
            }, [names]);

            return (
                <div className="flex flex-col lg:flex-row gap-6 h-[calc(100vh-160px)] min-h-[600px] items-stretch">
                    <div className="w-full lg:w-[350px] xl:w-[400px] flex flex-col gap-4 shrink-0 overflow-y-auto pr-1">
                        <div className="bg-white p-5 rounded-3xl shadow-lg border border-gray-100 flex flex-col flex-1 min-h-[300px]">
                            <div className="flex items-center justify-between mb-3">
                                <div className="flex items-center gap-2 text-gray-800">
                                    <div className="p-2 bg-indigo-50 rounded-lg text-indigo-600"><Users className="w-5 h-5" /></div>
                                    <h2 className="text-lg font-bold">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
                                </div>
                                <button onClick={handleClear} className="text-xs flex items-center gap-1 text-gray-400 hover:text-red-500 font-bold px-2 py-1 rounded hover:bg-red-50 transition-colors"><RefreshCw className="w-3 h-3" /> Ù…Ø³Ø­</button>
                            </div>
                            <textarea value={textInput} onChange={handleTextChange} placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù‡Ù†Ø§...&#10;Ø§Ø³Ù… ÙÙŠ ÙƒÙ„ Ø³Ø·Ø±" className="w-full flex-1 p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 outline-none resize-none mb-2 font-medium text-lg leading-relaxed shadow-inner" />
                            <div className="flex items-center justify-between text-xs text-gray-400 font-medium px-1"><span>ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ <Save className="w-3 h-3 inline ml-1"/></span><span className="bg-indigo-50 text-indigo-700 px-2 py-1 rounded-md">{names.length}</span></div>
                        </div>
                        <button onClick={handleSpin} disabled={names.length < 2 || isSpinning} className="w-full py-5 rounded-2xl bg-gradient-to-r from-gray-900 to-indigo-900 text-white font-bold text-2xl shadow-xl hover:shadow-2xl hover:shadow-indigo-200 hover:-translate-y-1 transition-all active:scale-95 active:shadow-none disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-3 relative overflow-hidden group">
                            <span className="absolute inset-0 bg-white/10 translate-x-full group-hover:translate-x-0 transition-transform duration-500 skew-x-12"></span>
                            <RotateCw className={`w-6 h-6 ${isSpinning ? 'animate-spin' : ''}`} />
                            <span className="relative z-10">ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©</span>
                        </button>
                        <div className={`transition-all duration-500 transform w-full ${winner ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4 pointer-events-none absolute bottom-0 z-[-1]'}`}>
                            <div className="bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl p-6 text-white shadow-lg border-2 border-white/20 text-center relative overflow-hidden">
                                <Sparkles className="absolute top-2 right-2 text-white/40 w-8 h-8 animate-pulse" />
                                <h3 className="text-sm font-bold opacity-90 mb-2 uppercase tracking-wide">Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ù…Ø®ØªØ§Ø± Ù‡Ùˆ:</h3>
                                <div className="text-3xl font-extrabold break-words">{winner}</div>
                            </div>
                        </div>
                    </div>
                    <div className="flex-1 bg-white rounded-[40px] border border-gray-200 shadow-sm flex items-center justify-center p-8 relative overflow-hidden bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:20px_20px]">
                        <div className="absolute top-8 left-1/2 -translate-x-1/2 z-20 filter drop-shadow-xl pointer-events-none">
                            <div className="w-16 h-20 bg-gray-800 rounded-b-full relative">
                                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-gray-700 border-4 border-gray-600"></div>
                            </div>
                            <div className="w-0 h-0 border-l-[32px] border-l-transparent border-r-[32px] border-r-transparent border-t-[60px] border-t-gray-800 -mt-4 mx-auto"></div>
                        </div>
                        <div className="relative h-full w-full flex items-center justify-center">
                            <div className="relative max-h-full max-w-full aspect-square rounded-full shadow-[0_20px_50px_rgba(0,0,0,0.15)] border-[16px] border-white ring-1 ring-gray-100" style={{ transition: isSpinning ? 'transform 5s cubic-bezier(0.2, 0, 0.2, 1)' : 'none', transform: `rotate(${rotation}deg)`, width: 'min(85vh, 100%)' }}>
                                {WheelSVG}
                            </div>
                            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-28 h-28 bg-white rounded-full shadow-2xl border-[6px] border-gray-50 flex items-center justify-center z-10 pointer-events-none">
                                <div className="w-20 h-20 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-full flex items-center justify-center border border-gray-100">
                                    <span className="text-4xl">ğŸ“</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 4. Transfer Tool (New Feature)
        const TransferTool = () => {
            const CATEGORIES = [
                { id: 'length', label: 'Ø§Ù„Ø·ÙˆÙ„', icon: Ruler },
                { id: 'weight', label: 'Ø§Ù„ÙˆØ²Ù†', icon: Weight },
                { id: 'temperature', label: 'Ø§Ù„Ø­Ø±Ø§Ø±Ø©', icon: Thermometer },
                { id: 'time', label: 'Ø§Ù„ÙˆÙ‚Øª', icon: Clock },
            ];

            const UNITS = {
                length: [
                    { id: 'km', label: 'ÙƒÙŠÙ„ÙˆÙ…ØªØ± (km)', factor: 1000 },
                    { id: 'm', label: 'Ù…ØªØ± (m)', factor: 1 },
                    { id: 'cm', label: 'Ø³Ù†ØªÙŠÙ…ØªØ± (cm)', factor: 0.01 },
                    { id: 'mm', label: 'Ù…Ù„ÙŠÙ…ØªØ± (mm)', factor: 0.001 },
                    { id: 'inch', label: 'Ø¨ÙˆØµØ© (in)', factor: 0.0254 },
                    { id: 'ft', label: 'Ù‚Ø¯Ù… (ft)', factor: 0.3048 },
                ],
                weight: [
                    { id: 'kg', label: 'ÙƒÙŠÙ„ÙˆØ¬Ø±Ø§Ù… (kg)', factor: 1 },
                    { id: 'g', label: 'Ø¬Ø±Ø§Ù… (g)', factor: 0.001 },
                    { id: 'mg', label: 'Ù…Ù„ÙŠØ¬Ø±Ø§Ù… (mg)', factor: 0.000001 },
                    { id: 'lb', label: 'Ø¨Ø§ÙˆÙ†Ø¯ (lb)', factor: 0.453592 },
                    { id: 'oz', label: 'Ø£ÙˆÙ†ØµØ© (oz)', factor: 0.0283495 },
                ],
                time: [
                    { id: 'year', label: 'Ø³Ù†Ø©', factor: 31536000 },
                    { id: 'day', label: 'ÙŠÙˆÙ…', factor: 86400 },
                    { id: 'hour', label: 'Ø³Ø§Ø¹Ø©', factor: 3600 },
                    { id: 'min', label: 'Ø¯Ù‚ÙŠÙ‚Ø©', factor: 60 },
                    { id: 'sec', label: 'Ø«Ø§Ù†ÙŠØ©', factor: 1 },
                ],
                temperature: [
                    { id: 'C', label: 'Ù…Ø¦ÙˆÙŠØ© (Â°C)', factor: 1 },
                    { id: 'F', label: 'ÙÙ‡Ø±Ù†Ù‡Ø§ÙŠØª (Â°F)', factor: 1 },
                    { id: 'K', label: 'ÙƒÙ„ÙÙ† (K)', factor: 1 },
                ]
            };

            const [activeCategory, setActiveCategory] = useState('length');
            const [amount, setAmount] = useState(1);
            const [fromUnit, setFromUnit] = useState('');
            const [toUnit, setToUnit] = useState('');
            const [result, setResult] = useState('');

            useEffect(() => {
                const defaultUnits = UNITS[activeCategory];
                setFromUnit(defaultUnits[0].id);
                setToUnit(defaultUnits[1].id);
            }, [activeCategory]);

            useEffect(() => {
                if (amount === '' || isNaN(Number(amount))) {
                    setResult('---');
                    return;
                }
                const val = Number(amount);
                let res = 0;

                if (activeCategory === 'temperature') {
                    let celsius = val;
                    if (fromUnit === 'F') celsius = (val - 32) * (5/9);
                    else if (fromUnit === 'K') celsius = val - 273.15;
                    
                    if (toUnit === 'C') res = celsius;
                    else if (toUnit === 'F') res = (celsius * (9/5)) + 32;
                    else if (toUnit === 'K') res = celsius + 273.15;
                    else res = celsius;
                } else {
                    const fromFactor = UNITS[activeCategory].find(u => u.id === fromUnit)?.factor || 1;
                    const toFactor = UNITS[activeCategory].find(u => u.id === toUnit)?.factor || 1;
                    res = (val * fromFactor) / toFactor;
                }
                setResult(Number.isInteger(res) ? res.toString() : res.toFixed(4).replace(/\.?0+$/, ''));
            }, [amount, fromUnit, toUnit, activeCategory]);

            return (
                <div className="max-w-4xl mx-auto">
                    <div className="bg-white rounded-[40px] shadow-xl border border-gray-100 overflow-hidden">
                        <div className="bg-gradient-to-r from-emerald-600 to-teal-600 p-8 text-white text-center relative overflow-hidden">
                            <div className="absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-2xl"></div>
                            <h2 className="text-3xl font-bold mb-2 relative z-10 flex items-center justify-center gap-3"><ArrowRightLeft className="w-8 h-8" /> Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</h2>
                            <p className="text-emerald-100 relative z-10">Ø­ÙˆÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ¯Ù‚Ø©</p>
                        </div>
                        <div className="flex flex-wrap justify-center gap-4 p-6 bg-gray-50 border-b border-gray-100">
                            {CATEGORIES.map((cat) => (
                                <button key={cat.id} onClick={() => setActiveCategory(cat.id)} className={`flex items-center gap-2 px-6 py-3 rounded-2xl font-bold transition-all duration-300 ${activeCategory === cat.id ? 'bg-emerald-600 text-white shadow-lg shadow-emerald-200 scale-105' : 'bg-white text-gray-500 hover:bg-gray-200'}`}>
                                    {React.createElement(cat.icon, { className: "w-5 h-5" })} {cat.label}
                                </button>
                            ))}
                        </div>
                        <div className="p-8 md:p-12">
                            <div className="flex flex-col md:flex-row gap-8 items-center justify-center">
                                <div className="flex-1 w-full space-y-4">
                                    <label className="text-sm font-bold text-gray-500 pr-2">Ø§Ù„Ù‚ÙŠÙ…Ø© ÙˆØ§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©</label>
                                    <div className="bg-gray-50 p-4 rounded-3xl border border-gray-200 transition-all focus-within:border-emerald-500 focus-within:ring-4 focus-within:ring-emerald-50">
                                        <input type="number" value={amount} onChange={(e) => setAmount(e.target.value)} className="w-full bg-transparent text-4xl font-bold text-gray-800 outline-none placeholder-gray-300 text-center mb-4 font-mono" placeholder="0" />
                                        <select value={fromUnit} onChange={(e) => setFromUnit(e.target.value)} className="w-full bg-white p-3 rounded-xl border border-gray-200 font-bold text-gray-700 outline-none focus:border-emerald-500">
                                            {UNITS[activeCategory].map((u) => (<option key={u.id} value={u.id}>{u.label}</option>))}
                                        </select>
                                    </div>
                                </div>
                                <div className="text-gray-300 md:rotate-90"><div className="bg-gray-100 p-4 rounded-full"><ArrowDown className="w-8 h-8 text-emerald-500" /></div></div>
                                <div className="flex-1 w-full space-y-4">
                                    <label className="text-sm font-bold text-gray-500 pr-2">Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
                                    <div className="bg-emerald-50 p-4 rounded-3xl border border-emerald-100">
                                        <div className="w-full bg-transparent text-4xl font-bold text-emerald-700 text-center mb-4 py-1 font-mono break-all">{result}</div>
                                        <select value={toUnit} onChange={(e) => setToUnit(e.target.value)} className="w-full bg-white p-3 rounded-xl border border-emerald-200 font-bold text-gray-700 outline-none focus:border-emerald-500">
                                            {UNITS[activeCategory].map((u) => (<option key={u.id} value={u.id}>{u.label}</option>))}
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 5. AI Planner (Note: Needs API Key safely in prod, stripped here for safety)
        const AiLessonPlanner = () => {
            const [topic, setTopic] = useState('');
            const [grade, setGrade] = useState('');
            const [loading, setLoading] = useState(false);
            const [result, setResult] = useState('');
            const [error, setError] = useState('');

            const generateActivity = async () => {
                setError('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© ØªØªØ·Ù„Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ÙØªØ§Ø­ API ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ.');
                // For a single file demo without env vars, we skip the actual call.
                // In a real deployed version, you would replace this with the actual API call logic.
            };

            return (
                <div className="max-w-3xl mx-auto">
                    <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
                        <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white">
                            <div className="flex items-center gap-3"><Sparkles className="w-8 h-8 text-yellow-300" /><h2 className="text-2xl font-bold">Ù…Ø®Ø·Ø· Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø°ÙƒÙŠ</h2></div>
                            <p className="mt-2 text-indigo-100 opacity-90">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø£ÙÙƒØ§Ø± Ø£Ù†Ø´Ø·Ø© ØµÙÙŠØ© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© ÙÙŠ Ø«ÙˆØ§Ù†Ù Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.</p>
                        </div>
                        <div className="p-8">
                            <div className="grid md:grid-cols-2 gap-6 mb-6">
                                <div><label className="block text-gray-700 font-bold mb-2">Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¯Ø±Ø³</label><input type="text" value={topic} onChange={(e) => setTopic(e.target.value)} placeholder="Ù…Ø«Ø§Ù„: Ø¯ÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø¡" className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none" /></div>
                                <div><label className="block text-gray-700 font-bold mb-2">Ø§Ù„ØµÙ</label><input type="text" value={grade} onChange={(e) => setGrade(e.target.value)} placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹" className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none" /></div>
                            </div>
                            <button onClick={generateActivity} disabled={loading} className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg shadow-lg transition-all active:scale-95 disabled:opacity-70 flex items-center justify-center gap-2">
                                {loading ? <><Loader2 className="w-6 h-6 animate-spin" /> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...</> : <><BookOpen className="w-6 h-6" /> Ø§Ù‚ØªØ±Ø­ Ù†Ø´Ø§Ø·Ø§Ù‹</>}
                            </button>
                            {error && <div className="mt-6 p-4 bg-red-50 text-red-700 rounded-lg border border-red-200">{error}</div>}
                        </div>
                    </div>
                </div>
            );
        };

        // 6. Main App Component
        const App = () => {
            const [currentView, setCurrentView] = useState(AppView.DASHBOARD);
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);

            const renderContent = () => {
                switch (currentView) {
                    case AppView.TIMER: return <TimerTool />;
                    case AppView.CALCULATOR: return <CalculatorTool />;
                    case AppView.NAME_WHEEL: return <NameWheelTool />;
                    case AppView.TRANSFERS: return <TransferTool />;
                    case AppView.AI_ASSISTANT: return <AiLessonPlanner />;
                    default: return <Dashboard onViewChange={setCurrentView} />;
                }
            };

            const getPageTitle = () => NAV_ITEMS.find(i => i.id === currentView)?.label || 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©';

            return (
                <div className="min-h-screen bg-gray-50 flex overflow-hidden">
                    {isSidebarOpen && <div className="fixed inset-0 bg-black/50 z-40 lg:hidden" onClick={() => setIsSidebarOpen(false)} />}
                    <aside className={`fixed lg:static inset-y-0 right-0 z-50 w-72 bg-white border-l border-gray-200 shadow-xl lg:shadow-none transform transition-transform duration-300 ease-in-out ${isSidebarOpen ? 'translate-x-0' : 'translate-x-full lg:translate-x-0'}`}>
                        <div className="h-full flex flex-col">
                            <div className="p-6 border-b border-gray-100 flex items-center gap-3">
                                <div className="bg-blue-600 p-2 rounded-lg text-white"><GraduationCap className="w-8 h-8" /></div>
                                <div><h1 className="text-xl font-extrabold text-gray-800">Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ</h1><p className="text-xs text-gray-500">Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙØµÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ</p></div>
                            </div>
                            <nav className="flex-1 p-4 space-y-2 overflow-y-auto">
                                {NAV_ITEMS.map((item) => (
                                    <button key={item.id} onClick={() => { setCurrentView(item.id); setIsSidebarOpen(false); }} className={`w-full flex items-center gap-4 p-4 rounded-xl transition-all duration-200 group text-right ${currentView === item.id ? 'bg-blue-50 text-blue-700 shadow-sm border border-blue-100' : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'}`}>
                                        <div className={`p-2 rounded-lg transition-colors ${currentView === item.id ? 'bg-white text-blue-600' : 'bg-gray-100 text-gray-500 group-hover:bg-white'}`}>{item.icon}</div>
                                        <div className="flex-1"><span className="font-bold block">{item.label}</span></div>
                                        {currentView === item.id && <ChevronLeft className="w-4 h-4" />}
                                    </button>
                                ))}
                            </nav>
                            <div className="p-4 border-t border-gray-100"><div className="text-center text-xs text-gray-400">Â© 2024 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</div></div>
                        </div>
                    </aside>
                    <main className="flex-1 flex flex-col min-w-0 overflow-hidden">
                        <header className="bg-white border-b border-gray-200 h-20 flex items-center px-6 justify-between sticky top-0 z-30">
                            <div className="flex items-center gap-4">
                                <button onClick={() => setIsSidebarOpen(!isSidebarOpen)} className="lg:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg">{isSidebarOpen ? <X /> : <Menu />}</button>
                                <h2 className="text-2xl font-bold text-gray-800">{getPageTitle()}</h2>
                            </div>
                        </header>
                        <div className="flex-1 overflow-y-auto p-4 md:p-8">
                            <div className="max-w-6xl mx-auto animate-in fade-in duration-500">{renderContent()}</div>
                        </div>
                    </main>
                </div>
            );
        };

        const Dashboard = ({ onViewChange }) => {
            return (
                <div className="space-y-8">
                    <div className="bg-gradient-to-l from-blue-700 to-blue-500 rounded-3xl p-8 md:p-12 text-white shadow-lg relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-64 h-64 bg-white opacity-5 rounded-full -translate-x-1/2 -translate-y-1/2 blur-3xl"></div>
                        <div className="relative z-10">
                            <h1 className="text-3xl md:text-5xl font-bold mb-4">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ù…Ø¹Ù„Ù…!</h1>
                            <p className="text-blue-100 text-lg md:text-xl max-w-2xl mb-4">Ù…Ù†ØµØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…ØµÙ…Ù…Ø© Ø®ØµÙŠØµØ§Ù‹ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© ÙˆÙ‚Øª Ø§Ù„Ø­ØµØ©ØŒ ØªØ­ÙÙŠØ² Ø§Ù„Ø·Ù„Ø§Ø¨ØŒ ÙˆØªØ®Ø·ÙŠØ· Ø§Ù„Ø¯Ø±ÙˆØ³ Ø¨Ø°ÙƒØ§Ø¡.</p>
                            <p className="text-yellow-300 font-bold text-lg border-t border-white/20 pt-4 inline-block">Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØµÙ…ÙŠÙ… : Ø£- ØºØ²ÙŠ Ø¨Ù† Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØºØ²ÙŠ</p>
                        </div>
                    </div>
                    <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        {NAV_ITEMS.filter(i => i.id !== AppView.DASHBOARD).map((item) => (
                            <button key={item.id} onClick={() => onViewChange(item.id)} className="group bg-white p-8 rounded-2xl shadow-sm border border-gray-100 hover:shadow-xl hover:border-blue-200 hover:-translate-y-1 transition-all duration-300 text-right flex flex-col items-start h-full">
                                <div className="w-14 h-14 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                    {React.cloneElement(item.icon, { className: "w-8 h-8" })}
                                </div>
                                <h3 className="text-xl font-bold text-gray-800 mb-2 group-hover:text-blue-600 transition-colors">{item.label}</h3>
                                <p className="text-gray-500 leading-relaxed text-sm">{item.description}</p>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // --- RENDER ---
        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
